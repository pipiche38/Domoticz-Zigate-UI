(self.webpackChunkzigate_plugin=self.webpackChunkzigate_plugin||[]).push([[245],{8245:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DeviceModule:()=>W});var a=n(5425),i=n(3548),o=n(2548),c=n(1572),s=n(3957),r=n(6073),l=n(2582),u=n(9774),d=n(5181),m=n(7703),p=n(1511);const g=["table"];function _(e,t){if(1&e&&(c._uU(0,"\n            "),c.TgZ(1,"div",25),c._uU(2,"\n              "),c.TgZ(3,"div"),c._uU(4,"\n                "),c.TgZ(5,"strong"),c._uU(6),c.ALo(7,"translate"),c.qZA(),c._uU(8),c.qZA(),c._uU(9,"\n            "),c.qZA(),c._uU(10,"\n          ")),2&e){const e=t.row;c.xp6(6),c.hij("",c.lcZ(7,2,"device.byname.devicename.param")," : "),c.xp6(2),c.hij(" ",e.Param,"\n              ")}}function h(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"a",28),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().row;return c.oxw().toggleExpandRow(t)}),c._uU(1,"\n            "),c.qZA()}if(2&e){const e=c.oxw().expanded;c.ekj("datatable-icon-right",!e)("datatable-icon-down",e)}}function Z(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"i",29),c.NdJ("click",function(){c.CHM(e);const t=c.oxw().row,n=c.oxw(),a=c.MAs(102);return n.rowToDelete=t,n.open(a)}),c.ALo(1,"translate"),c.qZA()}2&e&&c.s9C("title",c.lcZ(1,1,"device.byname.delete.colum"))}function U(e,t){if(1&e&&(c._uU(0,"\n            "),c.YNc(1,h,2,4,"a",26),c._uU(2,"\n            "),c.YNc(3,Z,2,3,"i",27),c._uU(4,"\n          ")),2&e){const e=t.row;c.xp6(1),c.Q6J("ngIf","{}"!==e.Param),c.xp6(2),c.Q6J("ngIf","not in DZ"===e.ConsistencyCheck||"Bad Pairing"===e.ConsistencyCheck)}}function f(e,t){1&e&&c._uU(0),2&e&&c.hij("\n            ",t.row._NwkId,"\n          ")}function v(e,t){1&e&&c._uU(0),2&e&&c.hij("\n            ",t.row.IEEE,"\n          ")}function b(e,t){1&e&&c._uU(0),2&e&&c.hij("\n            ",t.row.Model,"\n          ")}function x(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.hij("\n              ",e,"\n            ")}}function w(e,t){if(1&e&&(c._uU(0,"\n            "),c.YNc(1,x,2,1,"div",30),c._uU(2,"\n          ")),2&e){const e=t.row;c.xp6(1),c.Q6J("ngForOf",e.WidgetList)}}function A(e,t){if(1&e){const e=c.EpF();c._uU(0,"\n            "),c.TgZ(1,"input",31),c.NdJ("change",function(t){const n=c.CHM(e).row;return c.oxw().updateValue(t,"ZDeviceName",n._NwkId)}),c.qZA(),c._uU(2,"\n          ")}if(2&e){const e=t.row;c.xp6(1),c.Q6J("value",e.ZDeviceName)}}function T(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.hij("\n              ",e,"\n            ")}}function y(e,t){if(1&e&&(c._uU(0,"\n            "),c.YNc(1,T,2,1,"div",30),c._uU(2,"\n          ")),2&e){const e=t.row;c.xp6(1),c.Q6J("ngForOf",e.MacCapa)}}function C(e,t){1&e&&c._uU(0),2&e&&c.hij("\n            ",t.row.LQI,"\n          ")}function N(e,t){1&e&&c._uU(0),2&e&&c.hij("\n            ",t.row.Status,"\n          ")}function q(e,t){1&e&&c._uU(0),2&e&&c.hij("\n            ",t.row.Health,"\n          ")}function L(e,t){if(1&e){const e=c.EpF();c._uU(0,"\n            "),c.TgZ(1,"i",32),c.NdJ("click",function(){const t=c.CHM(e).row,n=c.oxw(),a=c.MAs(105);return n.rowParameter=t,n.editParameter(a)}),c.qZA(),c._uU(2,"\n          ")}}function k(e,t){1&e&&(c._uU(0,"\n  "),c.TgZ(1,"div",33),c._uU(2,"\n    "),c._UZ(3,"h4",34),c._uU(4,"\n    "),c.TgZ(5,"button",35),c.NdJ("click",function(){return t.$implicit.dismiss("Cross click")}),c._uU(6,"\n      "),c.TgZ(7,"span",36),c._uU(8,"\xd7"),c.qZA(),c._uU(9,"\n    "),c.qZA(),c._uU(10,"\n  "),c.qZA(),c._uU(11,"\n  "),c._UZ(12,"div",37),c._uU(13,"\n  "),c.TgZ(14,"div",38),c._uU(15,"\n    "),c.TgZ(16,"button",39),c.NdJ("click",function(){return t.$implicit.close("erase")}),c.qZA(),c._uU(17,"\n    "),c.TgZ(18,"button",40),c.NdJ("click",function(){return t.$implicit.dismiss("cancel")}),c.qZA(),c._uU(19,"\n  "),c.qZA(),c._uU(20,"\n"))}function J(e,t){if(1&e){const e=c.EpF();c._uU(0,"\n  "),c.TgZ(1,"div",33),c._uU(2,"\n    "),c._UZ(3,"h4",41),c._uU(4,"\n    "),c.TgZ(5,"button",35),c.NdJ("click",function(){return t.$implicit.close("cancel")}),c._uU(6,"\n      "),c.TgZ(7,"span",36),c._uU(8,"\xd7"),c.qZA(),c._uU(9,"\n    "),c.qZA(),c._uU(10,"\n  "),c.qZA(),c._uU(11,"\n  "),c.TgZ(12,"div",42),c._uU(13,"\n    "),c._UZ(14,"div",43),c.ALo(15,"translate"),c._uU(16,"\n    "),c.TgZ(17,"div",44),c._uU(18,"\n      "),c.TgZ(19,"div",45),c._uU(20),c.ALo(21,"translate"),c.qZA(),c._uU(22,"\n      "),c.TgZ(23,"div",45),c._uU(24,"\n        "),c.TgZ(25,"textarea",46),c.NdJ("change",function(t){return c.CHM(e),c.oxw().parameter=t}),c._uU(26),c.qZA(),c._uU(27,"\n      "),c.qZA(),c._uU(28,"\n    "),c.qZA(),c._uU(29,"\n  "),c.qZA(),c._uU(30,"\n  "),c.TgZ(31,"div",38),c._uU(32,"\n    "),c.TgZ(33,"button",47),c.NdJ("click",function(){return t.$implicit.dismiss("cancel")}),c.qZA(),c._uU(34,"\n    "),c.TgZ(35,"button",48),c.NdJ("click",function(){return t.$implicit.close("save")}),c.qZA(),c._uU(36,"\n  "),c.qZA(),c._uU(37,"\n")}if(2&e){const e=c.oxw();c.xp6(14),c.Q6J("innerHTML",c.lcZ(15,3,"device.byname.parameter.alert.subject"),c.oJD),c.xp6(6),c.hij("",c.lcZ(21,5,"device.byname.devicename.param")," :"),c.xp6(6),c.Oqu(e.rowParameter.Param)}}const E=function(e,t,n){return{emptyMessage:e,totalMessage:t,selectedMessage:n}},Y=new o.Yd("DeviceByNameComponent");let M=(()=>{class e{constructor(e,t,n,a){this.apiService=e,this.translate=t,this.modalService=n,this.toastr=a,this.rows=[],this.temp=[],this.hasEditing=!1,this.expanded={}}ngOnChanges(e){e.devices.currentValue!==e.devices.previousValue&&(this.json=this.devices,this.devices=this.devices,this.rows=this.devices,this.temp=[...this.rows])}ngOnInit(){}open(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(e=>{this.delete()},e=>{})}editParameter(e){this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then(e=>{this.updateValue(this.parameter,"Param",this.rowParameter._NwkId)},e=>{})}delete(){this.apiService.deleteZDeviceName(this.rowToDelete._NwkId).subscribe(()=>{const e=this.rows.indexOf(this.rowToDelete,0);this.rowToDelete=null,e>-1&&(this.rows.splice(e,1),this.rows=[...this.rows],this.temp=[...this.rows])})}updateValue(e,t,n){this.hasEditing=!0;const a=this.rows.find(e=>e._NwkId===n);a?a[t]=e.target.value:Y.error("row not found")}updateDevices(){this.apiService.putZDeviceName(this.json).subscribe(e=>{Y.debug(e),this.hasEditing=!1,this.toastr.success(this.translate.instant("api.global.succes.update.title"))})}updateFilter(e){const t=e.target.value.toLowerCase(),n=this.temp.filter(function(e){let n=!1;return e.Model&&(n=-1!==e.Model.toLowerCase().indexOf(t)),!n&&e.ZDeviceName&&(n=-1!==e.ZDeviceName.toLowerCase().indexOf(t)),!n&&e._NwkId&&(n=-1!==e._NwkId.toLowerCase().indexOf(t)),!n&&e.Status&&(n=-1!==e.Status.toLowerCase().indexOf(t)),!n&&e.IEEE&&(n=-1!==e.IEEE.toLowerCase().indexOf(t)),!n&&e.WidgetList&&e.WidgetList.forEach(function(e){!n&&e&&(n=-1!==e.toLowerCase().indexOf(t))}),!n&&e.MacCapa&&e.MacCapa.forEach(function(e){!n&&e&&(n=-1!==e.toLowerCase().indexOf(t))}),n||!t});this.rows=n,this.table.offset=0}toggleExpandRow(e){this.table.rowDetail.toggleExpandRow(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.s),c.Y36(l.sK),c.Y36(u.FF),c.Y36(d._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-device-by-name"]],viewQuery:function(e,t){if(1&e&&c.Gf(g,5),2&e){let e;c.iGM(e=c.CRH())&&(t.table=e.first)}},inputs:{devices:"devices"},features:[c._Bn([],[{provide:r.gN,useExisting:r.sg}]),c.TTD],decls:107,vars:77,consts:[[1,"card"],[1,"card-header"],[1,"btn","btn-primary","float-right",3,"disabled","translate","click"],[1,"card-body"],[1,"card-title",3,"innerHTML"],[1,"card-text"],["type","text",3,"placeholder","keyup"],[1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","limit","rowHeight","messages"],["table",""],[3,"rowHeight"],["ngx-datatable-row-detail-template",""],["prop","ConsistencyCheck",3,"sortable","maxWidth","name"],["ngx-datatable-cell-template",""],["prop","_NwkId",3,"maxWidth","name"],["prop","IEEE",3,"maxWidth","name"],["prop","Model",3,"name"],["prop","WidgetList",3,"name"],["prop","ZDeviceName",3,"name"],["prop","MacCapa",3,"name","maxWidth"],["prop","LQI",3,"name","maxWidth"],["prop","Status",3,"name","maxWidth"],["prop","Health",3,"name","maxWidth"],["prop","ZDeviceName",3,"sortable","maxWidth","name"],["content",""],["editContent",""],[2,"padding-left","35px"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"datatable-icon-right","datatable-icon-down","click",4,"ngIf"],["class","fa fa-trash","style","cursor: pointer",3,"title","click",4,"ngIf"],["href","javascript:void(0)","title","Expand/Collapse Row",3,"click"],[1,"fa","fa-trash",2,"cursor","pointer",3,"title","click"],[4,"ngFor","ngForOf"],["autofocus","","type","text",3,"value","change"],[1,"fas","fa-cog",2,"cursor","pointer",3,"click"],[1,"modal-header"],["id","modal-basic-title","translate","device.byname.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["translate","device.byname.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","device.byname.alert.delete",1,"btn","btn-primary",3,"click"],["type","button","translate","device.byname.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["id","modal-basic-title","translate","device.byname.parameter.alert.title",1,"modal-title"],[1,"modal-body"],[3,"innerHTML"],[1,"row","mt-3"],[1,"col-sm-12"],["rows","5","cols","60",3,"change"],["type","button","translate","device.byname.parameter.alert.cancel",1,"btn","btn-outline-dark",3,"click"],["type","button","translate","device.byname.parameter.alert.save",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3),c.ALo(4,"translate"),c.TgZ(5,"button",2),c.NdJ("click",function(){return t.updateDevices()}),c.ALo(6,"translate"),c.qZA(),c._uU(7,"\n  "),c.qZA(),c._uU(8,"\n  "),c.TgZ(9,"div",3),c._uU(10,"\n    "),c._UZ(11,"h5",4),c.ALo(12,"translate"),c.ALo(13,"translate"),c._uU(14,"\n    "),c.TgZ(15,"div",5),c._uU(16,"\n      "),c.TgZ(17,"input",6),c.NdJ("keyup",function(e){return t.updateFilter(e)}),c.ALo(18,"translate"),c.qZA(),c._uU(19,"\n      "),c.TgZ(20,"ngx-datatable",7,8),c.ALo(22,"translate"),c.ALo(23,"translate"),c.ALo(24,"translate"),c._uU(25,"\n        "),c.TgZ(26,"ngx-datatable-row-detail",9),c._uU(27,"\n          "),c.YNc(28,_,11,4,"ng-template",10),c._uU(29,"\n        "),c.qZA(),c._uU(30,"\n\n        "),c.TgZ(31,"ngx-datatable-column",11),c.ALo(32,"translate"),c._uU(33,"\n          "),c.YNc(34,U,5,2,"ng-template",12),c._uU(35,"\n        "),c.qZA(),c._uU(36,"\n\n        "),c.TgZ(37,"ngx-datatable-column",13),c.ALo(38,"translate"),c._uU(39,"\n          "),c.YNc(40,f,1,1,"ng-template",12),c._uU(41,"\n        "),c.qZA(),c._uU(42,"\n        "),c.TgZ(43,"ngx-datatable-column",14),c.ALo(44,"translate"),c._uU(45,"\n          "),c.YNc(46,v,1,1,"ng-template",12),c._uU(47,"\n        "),c.qZA(),c._uU(48,"\n        "),c.TgZ(49,"ngx-datatable-column",15),c.ALo(50,"translate"),c._uU(51,"\n          "),c.YNc(52,b,1,1,"ng-template",12),c._uU(53,"\n        "),c.qZA(),c._uU(54,"\n        "),c.TgZ(55,"ngx-datatable-column",16),c.ALo(56,"translate"),c._uU(57,"\n          "),c.YNc(58,w,3,1,"ng-template",12),c._uU(59,"\n        "),c.qZA(),c._uU(60,"\n        "),c.TgZ(61,"ngx-datatable-column",17),c.ALo(62,"translate"),c._uU(63,"\n          "),c.YNc(64,A,3,1,"ng-template",12),c._uU(65,"\n        "),c.qZA(),c._uU(66,"\n        "),c.TgZ(67,"ngx-datatable-column",18),c.ALo(68,"translate"),c._uU(69,"\n          "),c.YNc(70,y,3,1,"ng-template",12),c._uU(71,"\n        "),c.qZA(),c._uU(72,"\n        "),c.TgZ(73,"ngx-datatable-column",19),c.ALo(74,"translate"),c._uU(75,"\n          "),c.YNc(76,C,1,1,"ng-template",12),c._uU(77,"\n        "),c.qZA(),c._uU(78,"\n        "),c.TgZ(79,"ngx-datatable-column",20),c.ALo(80,"translate"),c._uU(81,"\n          "),c.YNc(82,N,1,1,"ng-template",12),c._uU(83,"\n        "),c.qZA(),c._uU(84,"\n        "),c.TgZ(85,"ngx-datatable-column",21),c.ALo(86,"translate"),c._uU(87,"\n          "),c.YNc(88,q,1,1,"ng-template",12),c._uU(89,"\n        "),c.qZA(),c._uU(90,"\n        "),c.TgZ(91,"ngx-datatable-column",22),c.ALo(92,"translate"),c._uU(93,"\n          "),c.YNc(94,L,3,0,"ng-template",12),c._uU(95,"\n        "),c.qZA(),c._uU(96,"\n      "),c.qZA(),c._uU(97,"\n    "),c.qZA(),c._uU(98,"\n  "),c.qZA(),c._uU(99,"\n"),c.qZA(),c._uU(100,"\n\n"),c.YNc(101,k,21,0,"ng-template",null,23,c.W1O),c._uU(103,"\n\n"),c.YNc(104,J,38,7,"ng-template",null,24,c.W1O),c._uU(106,"\n")),2&e&&(c.xp6(3),c.hij("\n    ",c.lcZ(4,35,"device.byname.header"),"\n    "),c.xp6(2),c.s9C("translate",c.lcZ(6,37,"device.byname.validate.button")),c.Q6J("disabled",!t.hasEditing),c.xp6(6),c.Q6J("innerHTML",c.lcZ(12,39,"group.create.subtitle"),c.oJD)("innerHTML",c.lcZ(13,41,"device.byname.subtitle"),c.oJD),c.xp6(6),c.s9C("placeholder",c.lcZ(18,43,"device.byname.placeholder")),c.xp6(3),c.Q6J("rows",t.rows)("columnMode","force")("headerHeight",40)("footerHeight","auto")("limit",10)("rowHeight","auto")("messages",c.kEZ(73,E,c.lcZ(22,45,"NODATA"),c.lcZ(23,47,"TOTAL"),c.lcZ(24,49,"SELECTED"))),c.xp6(6),c.Q6J("rowHeight","auto"),c.xp6(5),c.s9C("name",c.lcZ(32,51,"device.byname.trash.column")),c.Q6J("sortable",!1)("maxWidth",55),c.xp6(6),c.s9C("name",c.lcZ(38,53,"device.byname.shortid.column")),c.Q6J("maxWidth",100),c.xp6(6),c.s9C("name",c.lcZ(44,55,"device.byname.ieee.column")),c.Q6J("maxWidth",150),c.xp6(6),c.s9C("name",c.lcZ(50,57,"device.byname.model.column")),c.xp6(6),c.s9C("name",c.lcZ(56,59,"device.byname.widget.column")),c.xp6(6),c.s9C("name",c.lcZ(62,61,"device.byname.devicename.column")),c.xp6(6),c.s9C("name",c.lcZ(68,63,"device.byname.capabilities.column")),c.Q6J("maxWidth",130),c.xp6(6),c.s9C("name",c.lcZ(74,65,"device.byname.lqi.column")),c.Q6J("maxWidth",100),c.xp6(6),c.s9C("name",c.lcZ(80,67,"device.byname.status.column")),c.Q6J("maxWidth",100),c.xp6(6),c.s9C("name",c.lcZ(86,69,"device.byname.health.column")),c.Q6J("maxWidth",100),c.xp6(6),c.s9C("name",c.lcZ(92,71,"device.byname.devicename.param")),c.Q6J("sortable",!1)("maxWidth",100))},directives:[l.Pi,m.nE,m.$7,m.AR,m.UC,m.vq,p.O5,p.sg],pipes:[l.X$],styles:[""]}),e})();new o.Yd("DeviceComponent");const D=[{path:"",component:(()=>{class e{constructor(e,t,n){this.apiService=e,this.formBuilder=t,this.translate=n}ngOnInit(){this.form=this.formBuilder.group({devices:this.formBuilder.group({}),permit:this.formBuilder.group({})}),this.apiService.getZDeviceName().subscribe(e=>{this.devices=e})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.s),c.Y36(r.qu),c.Y36(l.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-device"]],decls:5,vars:2,consts:[[3,"formGroup"],[3,"devices"]],template:function(e,t){1&e&&(c.TgZ(0,"form",0),c._uU(1,"\n  "),c._UZ(2,"app-device-by-name",1),c._uU(3,"\n"),c.qZA(),c._uU(4,"\n")),2&e&&(c.Q6J("formGroup",t.form),c.xp6(2),c.Q6J("devices",t.devices))},directives:[r._Y,r.JL,r.sg,M],styles:[""]}),e})(),data:{title:(0,o.Kl)("device")}}];let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[],imports:[[i.Bz.forChild(D)],i.Bz]}),e})(),W=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[Q,a.m]]}),e})()}}]);